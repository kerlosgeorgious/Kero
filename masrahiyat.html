<!DOCTYPE html>
<html lang="ar">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ØªØ­Ø¯ÙŠ Ø§Ù„Ù…Ø³Ø±Ø­ÙŠØ§Øª</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>

    <div class="container">
        <h1>ğŸ­ ØªØ­Ø¯ÙŠ Ø§Ù„Ù…Ø³Ø±Ø­ÙŠØ§Øª</h1>
        <p>ğŸ”„ Ø¯ÙˆØ± Ø§Ù„ÙØ±ÙŠÙ‚: <span id="teamName"></span></p>
        <p>ğŸ† Ø§Ù„Ù†Ù‚Ø§Ø·: <span id="teamScore">0</span></p>
        <p>â³ Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ù…ØªØ¨Ù‚ÙŠ: <span id="timer"></span> Ø«Ø§Ù†ÙŠØ©</p>
        <p>ğŸ¯ Ø§Ù„Ø¬ÙˆÙ„Ø§Øª Ø§Ù„Ù…ØªØ¨Ù‚ÙŠØ©: <span id="currentRound"></span> / <span id="totalRounds"></span></p>

        <div class="question-box">
            <p id="question"></p>
        </div>

        <button id="correctBtn" onclick="answer(true)">âœ… ØµØ­</button>
        <button id="wrongBtn" onclick="answer(false)">âŒ ØºØ´Ø§Ø´</button>

    </div>

    <script>
        let totalRounds = parseInt(localStorage.getItem("selectedRounds")) || 5;
        let timePerRound = parseInt(localStorage.getItem("selectedTime")) || 30;
        let team1 = localStorage.getItem("team1Name") || "Ø§Ù„ÙØ±ÙŠÙ‚ Ø§Ù„Ø£ÙˆÙ„";
        let team2 = localStorage.getItem("team2Name") || "Ø§Ù„ÙØ±ÙŠÙ‚ Ø§Ù„Ø«Ø§Ù†ÙŠ";

        let teams = [{ name: team1, score: 0 }, { name: team2, score: 0 }];
        let currentTeamIndex = 0;
        let currentRound = 1;
        let totalQuestions = totalRounds * 2;
        let timer;
        let timeLeft;
        let isAnswered = false;

        let masrahiyat = [
            "Ø§Ù„ÙˆØ§Ø¯ Ø³ÙŠØ¯ Ø§Ù„Ø´ØºØ§Ù„", "Ù…Ø¯Ø±Ø³Ø© Ø§Ù„Ù…Ø´Ø§ØºØ¨ÙŠÙ†", "Ø´Ø§Ù‡Ø¯ Ù…Ø´ÙØ´ Ø­Ø§Ø¬Ø©", "Ø§Ù„Ø²Ø¹ÙŠÙ…", "Ø³Ùƒ Ø¹Ù„Ù‰ Ø¨Ù†Ø§ØªÙƒ",
            "Ø±ÙŠØ§ ÙˆØ³ÙƒÙŠÙ†Ø©", "Ø¨ÙˆØ¯ÙŠ Ø¬Ø§Ø±Ø¯", "Ø­Ø²Ù…Ù†ÙŠ ÙŠØ§", "ÙƒØ¯Ù‡ Ø£ÙˆÙƒÙŠÙ‡", "Ø§Ù„Ø¹ÙŠØ§Ù„ ÙƒØ¨Ø±Øª",
            "Ø£Ù†Ø§ ÙˆÙ‡Ùˆ ÙˆÙ‡ÙŠ", "Ø£Ù‡Ù„Ø§ ÙŠØ§ Ø¨ÙƒÙˆØ§Øª", "Ø­Ù„Ùˆ Ø§Ù„ÙƒÙ„Ø§Ù…", "Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø¨Ø§Ù„Ù…Ù„Ø§Ø¨Ø³ Ø§Ù„Ø±Ø³Ù…ÙŠØ©", "Ø¬ÙˆØ² ÙˆÙ„ÙˆØ²",
            "Ø´Ø§Ø±Ø¹ Ù…Ø­Ù…Ø¯ Ø¹Ù„ÙŠ", "Ø®Ø¯ Ø§Ù„ÙÙ„ÙˆØ³ ÙˆØ§Ø¬Ø±ÙŠ", "Ø§Ù„Ù…Ø­Ø¸ÙˆØ¸ ÙˆØ£Ù†Ø§", "Ù„Ø¹Ø¨Ø© Ø§Ù„Ø³Øª", "ÙƒØ§Ø±Ù…Ù†",
            "Ø¯Ùˆ Ø±ÙŠ Ù…ÙŠ ÙØ§ØµÙˆÙ„ÙŠØ§", "Ø·Ø§Ø¨ÙˆÙ†Ø© Ø­Ù…Ø²Ø©", "ØªØ®Ø§Ø±ÙŠÙ", "Ø£Ù†Ø§ ÙÙŠÙ† ÙˆØ¥Ù†ØªÙŠ ÙÙŠÙ†", "Ø¨Ù‡Ù„ÙˆÙ„ ÙÙŠ Ø¥Ø³Ø·Ù†Ø¨ÙˆÙ„",
            "Ù‡Ø§Ù„Ø© Ø­Ø¨ÙŠØ¨ØªÙŠ", "ÙƒØ¨Ø§Ø±ÙŠÙ‡", "ÙƒØ¯Ù‡ Ø±Ø¶Ø§", "Ø³ÙƒØ© Ø§Ù„Ø³Ù„Ø§Ù…Ø©", "Ø­ØµÙ„ ÙŠØ§Ø³Ø¹Ø§Ø¯Ø© Ø§Ù„Ø¨ÙŠÙ‡",
            "Ø§Ù„Ø¹Ø³ÙƒØ±ÙŠ Ø§Ù„Ø£Ø®Ø¶Ø±", "Ù…Ù…Ù†ÙˆØ¹ Ø§Ù„Ø®Ø±ÙˆØ¬", "Ø§Ù„ØºØ¨ÙŠ ÙˆØ£Ù†Ø§", "Ù…Ø±Ø§ØªÙŠ Ø²Ø¹ÙŠÙ…Ø© Ø¹ØµØ§Ø¨Ø©", "ÙˆÙ„Ø§ ÙÙŠ Ø§Ù„Ø£Ø­Ù„Ø§Ù…",
            "Ø¨Ù…Ø¨Ø© ÙƒØ´Ø±", "Ø§Ù„Ø¯Ù†ÙŠØ§ Ù„Ù…Ø§ ØªÙ„Ù", "ÙˆØ§Ø­Ø¯ Ù„Ù…ÙˆÙ† ÙˆØ§Ù„ØªØ§Ù†ÙŠ Ù…Ø¬Ù†ÙˆÙ†", "Ø§Ù„Ù…Ù‡Ø±", "Ø®Ù„ÙŠ Ø¨Ø§Ù„Ùƒ Ù…Ù† Ø¬ÙŠØ±Ø§Ù†Ùƒ"
        ];

        function updateUI() {
            document.getElementById("teamName").textContent = teams[currentTeamIndex].name;
            document.getElementById("teamScore").textContent = teams[currentTeamIndex].score;
            document.getElementById("currentRound").textContent = currentRound;
            document.getElementById("totalRounds").textContent = totalRounds * 2;
        }

        function startTimer() {
            clearInterval(timer);
            timeLeft = timePerRound;
            document.getElementById("timer").textContent = timeLeft;

            timer = setInterval(() => {
                if (timeLeft > 0) {
                    timeLeft--;
                    document.getElementById("timer").textContent = timeLeft;
                } else {
                    clearInterval(timer);
                    nextTurn();
                }
            }, 1000);
        }

        function getRandomQuestion() {
            let randomIndex = Math.floor(Math.random() * masrahiyat.length);
            document.getElementById("question").textContent = masrahiyat[randomIndex];
        }

        function answer(isCorrect) {
            if (isAnswered) return;
            isAnswered = true;

            clearInterval(timer);

            if (isCorrect) {
                teams[currentTeamIndex].score += 3;
                document.getElementById("teamScore").textContent = teams[currentTeamIndex].score;
            }

            document.getElementById("correctBtn").disabled = true;
            document.getElementById("wrongBtn").disabled = true;

            setTimeout(nextTurn, 1000);
        }

        function nextTurn() {
            isAnswered = false;
            document.getElementById("correctBtn").disabled = false;
            document.getElementById("wrongBtn").disabled = false;

            if (currentRound < totalQuestions) {
                currentRound++;
                currentTeamIndex = (currentTeamIndex + 1) % teams.length;
                getRandomQuestion();
                updateUI();
                startTimer();
            } else {
                endGame();
            }
        }

        function endGame() {
            localStorage.setItem("finalScore1", teams[0].score);
            localStorage.setItem("finalScore2", teams[1].score);
            setTimeout(() => {
                window.location.href = "results.html";
            }, 3000);
        }

        document.addEventListener("DOMContentLoaded", function () {
            updateUI();
            getRandomQuestion();
            startTimer();
        });
    </script>
</body>
</html>